// Download Data, Installer, Scripts -------Success
{
  "schemaVersion": "2.2",
  "description": "RunCommandInstallGlobalGeocodingModule-Windows-OneScript",
  "parameters": {},
  "mainSteps": [
    {
      "action": "aws:downloadContent",
      "name": "downloadInstaller",
      "inputs": {
        "sourceType": "S3",
        "sourceInfo": {
          "path": "https://cloudformation-spectrum.s3.amazonaws.com/Modules/GGM/GGM-Windows/installers-22.1-nt/"
        },
        "destinationPath": "C:\\Program Files\\Precisely\\GGM\\installers-22.1-nt"
      }
    },
    {
      "action": "aws:downloadContent",
      "name": "downloadData",
      "inputs": {
        "sourceType": "S3",
        "sourceInfo": {
          "path": "https://cloudformation-spectrum.s3.amazonaws.com/Modules/GGM/data/"
        },
        "destinationPath": "C:\\Program Files\\Precisely\\GGM\\data"
      }
    },
    {
      "action": "aws:downloadContent",
      "name": "downloadScripts",
      "inputs": {
        "sourceType": "S3",
        "sourceInfo": {
          "path": "https://cloudformation-spectrum.s3.amazonaws.com/Modules/GGM/moduleScripts/"
        },
        "destinationPath": "C:\\Program Files\\Precisely\\GGM\\moduleScripts"
      }
    }
  ]
},
//Do I need a Waiting or Listener function here

// Install of Module---------------Success
{
  "schemaVersion": "2.2",
  "description": "RunCommandInstallGlobalGeocodingModule-Windows-OneScript",
  "parameters": {},
  "mainSteps": [
    {
      "action": "aws:runPowerShellScript",
      "name": "runInstaller",
      "inputs": {
        "timeoutSeconds": 10800 ,
        "runCommand": ["cd 'C:\\Program Files\\Precisely\\GGM\\installers-22.1-nt'", 
        "./install.exe"
        ]
      }
    }
  ]
}
//Listener for install completion?

//Move data to server/import--------Success
{
    "schemaVersion": "2.2",
    "description": "RunCommandInstallGlobalGeocodingModule-Windows-OneScript",
    "parameters": {},
    "mainSteps": [
      {
        "action": "aws:runPowerShellScript",
        "name": "runInstaller",
        "inputs": {
          "timeoutSeconds": 10800 ,
          "runCommand": ["Move-Item -Path 'C:\\Program Files\\Precisely\\GGM\\data\\*.spd' -Destination 'C:\\Program Files\\Precisely\\Spectrum\\server\\import'"]
        }
      }
    ]
  }
//Run script for configuration-----------Success
{
    "schemaVersion": "2.2",
    "description": "RunCommandInstallGlobalGeocodingModule-Windows-OneScript",
    "parameters": {},
    "mainSteps": [
      {
        "action": "aws:runPowerShellScript",
        "name": "createDBConnection",
        "inputs": {
          "timeoutSeconds": 10800 ,
          "runCommand": ["cd 'C:/Program Files/Precisely/spectrum-cli-22.1'",
                "./cli.cmd --cmdfile 'C:/Program Files/Precisely/GGM/moduleScripts/GgmResourceImport.cli'"]
        }
      }
    ]
  }
//Delete installer 

//Combined Script
{
    "schemaVersion": "2.2",
    "description": "RunCommandInstallGlobalGeocodingModule-Windows-OneScript",
    "parameters": {},
    "mainSteps": [
      {
        "action": "aws:downloadContent",
        "name": "downloadInstaller",
        "inputs": {
          "sourceType": "S3",
          "sourceInfo": {
            "path": "https://cloudformation-spectrum.s3.amazonaws.com/Modules/GGM/GGM-Windows/installers-22.1-nt/"
          },
          "destinationPath": "C:\\Program Files\\Precisely\\GGM\\installers-22.1-nt"
        }
      },
      {
        "action": "aws:downloadContent",
        "name": "downloadData",
        "inputs": {
          "sourceType": "S3",
          "sourceInfo": {
            "path": "https://cloudformation-spectrum.s3.amazonaws.com/Modules/GGM/data/"
          },
          "destinationPath": "C:\\Program Files\\Precisely\\GGM\\data"
        }
      },
      {
        "action": "aws:downloadContent",
        "name": "downloadScripts",
        "inputs": {
          "sourceType": "S3",
          "sourceInfo": {
            "path": "https://cloudformation-spectrum.s3.amazonaws.com/Modules/GGM/GGM-Windows/moduleScriptsIntlWindows2019/"
          },
          "destinationPath": "C:\\Program Files\\Precisely\\GGM\\moduleScriptsIntlWindows2019"
        }
      },
      {
        "action": "aws:runPowerShellScript",
        "name": "runInstaller",
        "inputs": {
          "timeoutSeconds": 10800 ,
          "runCommand": ["cd 'C:\\Program Files\\Precisely\\GGM\\installers-22.1-nt'", 
          "./install.exe"
          ]
        }
      },
      {
        "action": "aws:runPowerShellScript",
        "name": "moveData",
        "inputs": {
          "timeoutSeconds": 10800 ,
          "runCommand": ["Move-Item -Path 'C:\\Program Files\\Precisely\\GGM\\data\\*.spd' -Destination 'C:\\Program Files\\Precisely\\Spectrum\\server\\import'"]
        }
      },
      {
        "action": "aws:runPowerShellScript",
        "name": "createDBConnection",
        "inputs": {
          "timeoutSeconds": 10800 ,
          "runCommand": ["cd 'C:/Program Files/Precisely/spectrum-cli-22.1'",
                "./cli.cmd --cmdfile 'C:/Program Files/Precisely/GGM/moduleScriptsIntlWindows2019/GgmIntlResourceImport.cli'"]
        }
      },
      {
        "action": "aws:runPowerShellScript",
        "name": "deleteEverything",
        "inputs": {
          "timeoutSeconds": 10800 ,
          "runCommand": ["Remove-Item 'C:\\Program Files\\Precisely\\GGM'"]
        }
      }
    ]
  }




Original

  {
    "Version": "2012-10-17",
    "Id": "Policy1675264814603",
    "Statement": [
      {
        "Sid": "Stmt1675264807887",
        "Effect": "Allow",
        "Principal": "*",
        "Action": "s3:GetObject",
        "Resource": "arn:aws:s3:::cloudformation-spectrum/*"
      },
      {
        "Sid": "Cross Org SPOD",
        "Effect": "Allow",
        "Principal": {
          "AWS": "arn:aws:iam::179070164911:root"
        },
        "Action": "s3:GetObject",
        "Resource": "arn:aws:s3:::cloudformation-spectrum/*"
      }
    ]
  }


New

  {
     "Version": "2008-10-17",
     "Id": "MyPolicy",
     "Statement": [
     {
     "Sid": "AllowBucketList",
     "Effect": "Allow",
     "Principal": {
     "AWS": "arn:aws:iam::889313338227:root"
     },
     "Action": "s3:ListBucket",
     "Resource": "arn:aws:s3:::farmers-rds-replica-temp"
     },
     {
    "Sid": "AlowUploadDownload",
     "Effect": "Allow",
     "Principal": {
     "AWS": "arn:aws:iam::889313338227:root"
     },
     "Action": [
     "s3:GetObject",
     "s3:PutObject"
     ],
     "Resource": "arn:aws:s3:::farmers-rds-replica-temp/*"
     },
     {
     "Sid": "S3PolicyStmt-DO-NOT-MODIFY-1657122082746",
     "Effect": "Allow",
     "Principal": {
     "Service": "logging.s3.amazonaws.com"
     },
     "Action": "s3:PutObject",
     "Resource": "arn:aws:s3:::farmers-rds-replica-temp/*"
     }
     ]
    }
    
    has context menu
    Compose